# frontend/password-app/Makefile
.PHONY: help dev build test clean setup

include ../../scripts/colors.mk

help: ## Password Manager App Vue.js
	printf "$(PURPLE)üîê Password Manager$(NC)"
	@grep -E '^[a-zA-Z_-]+:.*?## .*$$' $(MAKEFILE_LIST) | awk 'BEGIN {FS = ":.*?## "}; {printf "$(GREEN)%-20s$(NC) %s\\n", $$1, $$2}'

setup: ## Setup Node.js
	$(call log_info,"Setup Password Manager")
	@npm install
	$(call log_success,"Password Manager configur√©")

# ‚úÖ DOCKER PAR D√âFAUT
dev: ## D√©marrage d√©veloppement avec Docker
	$(call log_info,"D√©marrage Password Manager Docker")
	@docker compose -f ../../docker-compose.yml up -d password-app
	$(call log_success,"Password Manager: http://localhost:8095")

dev-docker: ## D√©marrage avec Docker (alias)
	@$(MAKE) dev

dev-local: ## D√©marrage local (sans Docker)
	$(call log_info,"D√©marrage local Password Manager")
	@npm run dev &
	$(call log_success,"Password Manager local: http://localhost:8095")

build: ## Build production
	$(call log_info,"Build Password Manager")
	@npm run build
	$(call log_success,"Build termin√©")

preview: ## Preview production
	@npm run preview

test: ## Tests Vue.js
	$(call log_info,"Tests Password Manager")
	@npm run test:unit
	$(call log_success,"Tests termin√©s")

test-crypto: ## Tests cryptographie
	@npm run test:crypto

test-security: ## Tests s√©curit√©
	@npm run test:security

lint: ## Linting Vue/JS
	@npm run lint

format: ## Formatage code
	@npm run format

security-audit: ## Audit s√©curit√©
	@npm audit
	@npm run audit:security

logs: ## Logs d√©veloppement
	@docker compose -f ../../docker-compose.yml logs -f password-app

status: ## Status du service
	@docker compose -f ../../docker-compose.yml ps password-app

shell: ## Shell dans container
	@docker compose -f ../../docker-compose.yml exec password-app /bin/sh

clean: ## Nettoyage
	@rm -rf node_modules/ dist/ .vite/
	@docker compose -f ../../docker-compose.yml stop password-app